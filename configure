#!/usr/bin/env ruby

require 'erb'

LOCALE = ENV['DOTFILES_LOCALE']
RECOGNIZED_LOCALES = ['home', 'work']

raise "Unrecognized locale #{LOCALE}" unless RECOGNIZED_LOCALES.include? LOCALE

renderer = ERB.new(File.read ".vimrc.erb")
clang_library_path = "/usr/lib" # This requires the machine to have the Xcode command line tools installed

result = renderer.result(binding) 

outpath = File.join(Dir.pwd, '.vimrc')
File.open(outpath, 'w') do |f|
  f << result 
  puts "Created #{outpath} for locale #{LOCALE}"
end
